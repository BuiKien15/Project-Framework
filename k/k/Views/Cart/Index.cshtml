@using k.Models.ViewModel
@model CartItemViewModel
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
<h4>Giỏ hàng</h4>
@{
}
<!-- Shoping Cart Section Begin -->
<section class="shoping-cart spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="shoping__cart__table">
                    <table>
                        <thead>
                            <tr>
                                <th class="shoping__product">Products</th>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.CartItems.Count > 0)
                            {
                                @foreach (var item in Model.CartItems)
                                {
                                    <tr>
                                        <td class="shoping__cart__item">
                                            <img style="height:100px;width:100px" src="../ProductImage/Album/@item.Image" alt="img">
                                            <h5>@item.ProductName</h5>
                                        </td>
                                        
                                        <td class="shoping__cart__price">
                                            <p>@item.Price</p>
                                        </td>
                                        <td class="shoping__cart__quantity">
                                            <div class="quantity">
                                                <div class="pro-qty">
                                                    <a class="btn btn-primary btn-sm" asp-controller="Cart" asp-action="Increase" asp-route-id="@item.ProductId">+</a>
                                                    <input type="text" value="@item.Quantity">
                                                    <a class="btn btn-success btn-sm" asp-controller="Cart" asp-action="Decrease" asp-route-id="@item.ProductId">-</a>
                                                    <a class="btn btn-danger btn-sm" asp-controller="Cart" asp-action="Remove" asp-route-id="@item.ProductId">Remove</a>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="shoping__cart__total">
                                            @Model.CartItems.Where(x=>x.ProductId== @item.ProductId).Sum(x=>x.Quantity*x.Price).ToString()
                                        </td>
                                        <td class="shoping__cart__item__close">
                                            <span class="icon_close"></span>
                                        </td>
                                    </tr>
                                }
                                <tr rowspan="6">
                                    <td colspan="6">Grand Total: @Model.GrandTotal.ToString()</td>
                                </tr>
                            }
                            else
                            {
                                <tr>
                                    <td colspan="5"> <h4>Giỏ hàng bạn trống</h4></td>
                                </tr>
                               
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
<!-- Shoping Cart Section End -->
